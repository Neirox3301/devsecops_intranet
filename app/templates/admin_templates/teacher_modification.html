
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Modification de professeur</title>
</head>

<body>
    {% if error_message %}
        <div style="color: #ff0000;">{{ error_message }}</div>
    {% endif %}

    {% if success_message %}
        <div style="color: #00ff00;">{{ success_message }}</div>
    {% endif %}

    <div>
        <!-- Teacher selection section-->
        <form action="{{ url_for('.teacher_modification') }}" method="POST">
            <div style="max-height: 200px; overflow-y: auto; border: 1px solid #ccc; padding: 10px;">
                <select name="chosen_teacher_id" size="10" style="width: 100%;">
                    {% for teacher in teachers %}
                    <!-- TODO : afficher toutes les classes où le prof enseigne -->
                        <option name ="teacher" value="{{ teacher['id'] }}">{{ teacher['first_name'] }} {{ teacher['last_name'] }}</option>
                    {% endfor %}
                </select>
            </div>
            <button type="submit">Afficher</button>
        </form>
    </div>
        
    <!-- Teacher modification form -->
    {% if chosen_teacher %}
        <div>
            <form action="{{ url_for('.teacher_modification') }}" method="POST">
                <input type="hidden" name="information_form_submitted" value="True">
                <input type="hidden" name="chosen_teacher_id" value="{{ chosen_teacher['id'] }}">
                <div>
                    <label for="first_name">Prénom</label>
                    <input type="text" name="first_name" value="{{ chosen_teacher['first_name'] }}">
                </div>
                <div>
                    <label for="last_name">Nom</label>
                    <input type="text" name="last_name" value="{{ chosen_teacher['last_name'] }}">
                </div>
                <div>
                    <label for="class">Professeur principal de :</label>
                    {% for class_ in classes_dict %}
                        <div>
                            <input type="checkbox" name="selected_classes" value="{{ class_['id'] }}"
                            {% if class_.id in chosen_teacher.classes %}checked{% endif %}>
                            <label>{{ class_['name'] }}</label>
                        </div>
                    {% endfor %}
                </div>
                <button type="submit" name="action" value="delete" onclick="return confirmDelete()">Supprimer professeur</button>
                <button type="submit" name="action" value="modify">Sauvgarder</button>
            </form>
        </div>
    {% endif %}
</body>

<script>
    function confirmDelete() {
        return confirm("Êtes-vous sûr de vouloir supprimer ce professeur définitivement ? (cette action est irréversible)");
    }
</script>

</html>